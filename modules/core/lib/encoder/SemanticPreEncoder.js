"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SemanticPreEncoder=void 0;var errors_1=require("../errors"),SemanticPreEncoder=function(){function e(){}return e.process=function(e,r){var o=e.gvl;if(!o)throw new errors_1.EncodingError("Unable to encode TCModel without a GVL");if(!o.isReady)throw new errors_1.EncodingError("Unable to encode TCModel tcModel.gvl.readyPromise is not resolved");(e=e.clone()).consentLanguage=o.language.toUpperCase(),(null==r?void 0:r.version)>0&&(null==r?void 0:r.version)<=this.processor.length?e.version=r.version:e.version=this.processor.length;var n=e.version-1;if(!this.processor[n])throw new errors_1.EncodingError("Invalid version: "+e.version);return this.processor[n](e,o)},e.processor=[function(e){return e},function(e,r){e.publisherRestrictions.gvl=r,e.purposeLegitimateInterests.unset(1);var o=new Map;return o.set(e.vendorLegitimateInterests,"legIntPurposes"),o.set(e.vendorConsents,"purposes"),o.forEach((function(e,o){o.forEach((function(n,s){var t=r.vendors[s];(!t||n&&0===t[e].length)&&o.unset(s)}))})),e.vendorsDisclosed.set(r.vendors),e}],e}();exports.SemanticPreEncoder=SemanticPreEncoder;